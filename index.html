<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
      "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>Statistics on the Web Best Practices</title>
  <link rel="stylesheet" type="text/css" href="./css/base.css" />
  <link rel="stylesheet" type="text/css" href="./css/ezweb.css" />
  
  <link rel="stylesheet" type="text/css" href="https://www.w3.org/TR/dwbp/localstyles.css" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
</head>

<body>

<h1 id="title">Statistics on the Web Best Practices</h1>


<h2 id="mymw-doctype">Working Draft - 12 July 2017</h2>
<dl>
  <dt>This version:</dt>
    <dd><a
      href="https://islab-uom.github.io/qbBestPractices/">https://islab-uom.github.io/qbBestPractices/</a>
    </dd>
  <dt>Latest version:</dt>
    <dd><a
      https://islab-uom.github.io/qbBestPractices/">https://islab-uom.github.io/qbBestPractices/</a>
    </dd>
  <dt>Last Update:</dt>
    <dd>Date: 12/07/2017</dd>
  <dt>Authors:</dt>
    <dd><a href="http://kalampok.is">Evangelos Kalampokis</a>, University of Macedonia, Greece and CERTH/ITI</dd>
    <dd>Dimitris Zeginis, CERTH/ITI</dd>
  <dt>Contributors:</dt>
   	<dd>Sarven Capadisli</dd>
    <dd>Oscar Corcho</dd>
    <dd>Franck Cotton</dd>
    <dd>Adrian Gschwend</dd>
    <dd>Paul Hermans</dd>
    <dd>Andrei Melis</dd>
    <dd>Dave Reynolds</dd>
    <dd>Bill Roberts</dd>
    <dd>Luca Valentino</dd>
  <dt>Acknowledgements:</dt>
    <dd>This work was partially funded by the European Commission within the H2020 Program in the context of the <a href="http://opengovintelligence.eu/">OpenGovIntelligence</a> project under grand agreement No. 693849 <a></dd>
</dl>

<p class="copyright">Copyright © 2017.... This work is licensed under XXX, </p>

<p class="copyright" style="clear:both">This work is supported by XXX</p>
<hr />

<h2 id="abstract">Abstract</h2>

<p>This document presents a set of best practices for publishing statistics on the Web following the linked data principles. These practices aim at (a) supporting data publishers
to model their data and (b) facilitating them to apply common linked data standards. The wide adoption of such practices can increase interoperability among various sources of statistics 
on the Web, and thus facilitate the integration of related statistics from different portals as well as the development of generic software tools that can be reused across different datasets.

  </p>

<h2 id="status">Status of this Document</h2>

<p>The aim of this document is to trigger and contribute to a discussion on the development of a set of best practices for publishing statistics on the Web. 
It describes the results of a research work conducted by CERTH in the course of the OpenGovIntelligence project.</p> 

<p>The approach that was followed comprises two steps:
<ul> 
<li>an analysis of official linked statistical data portals (i.e. to identify conflicting publishing approaches, and </li>
<li>the involvement of experts to provide their feedback and contribute to the comprehension of the publishing approaches as well as to the definition of the best practices. Towards 
this direction the Delphi method was employed using a questionnaire with multiple iterations to collect feedback until a stability in the responses was attained </li>
</ul>

However, a set of open issues still remain to be explored.

The Scottish Government\footnote{statistics.gov.scot} provides the official data on ``Neighborhood Statistics'' as linked statistical data. They offer 127 cubes categorized to 17 themes (e.g. housing, transport). The UK Department for Communities and Local Government (DCLG)\footnote{opendatacommunities.org} provides data of a selection of statistics including local government finance and housing and homelessness. They offer 208 cubes categorized to 14 themes (e.g. homelessness, societal well-being).  The Flemish Government\footnote{data.opendataforum.info} makes available some of their data as linked statistical data. Specifically, 11 cubes have been published through the OpenCube project\footnote{http://opencube-project.eu/} with the official permission and contribution of the Flemish Government. The European Commission’s Digital Agenda\footnote{digital-agenda-data.eu/data}  provides its Scoreboard as linked statistical data organized to 4 cubes. Finally, two censuses have been published as linked statistical data: i) the Italian Census 2011 published by the Italian National Institute of Statistics (ISTAT)\footnote{datiopen.istat.it} and organized at 8 cubes and ii) the Irish Census\footnote{data.cso.ie}


 </p>

<p>
This document describes best practices 
Comments are very welcome, please send them to the
authors.</p>

<h2 id="contents">Table of Contents</h2>
<ol id="toc">
  <li><a href="#intro">1. Introduction</a> </li>
  <li><a href="#audience">2. Audience</a> </li>
  <li><a href="#scope">3. Scope</a> </li>
  <li><a href="#namespaces">4. Namespaces</a> </li>
  <li><a href="#runningexample">5. Running example</a> </li>  
  <li><a href="#bestpractices">6. Best practices</a> </li>  
  
  
</ol>

<h3>Appendices</h3>
<ol id="appendix">
  <li><a href="#references">References</a></li>
  <li><a href="#alternatives">ALternative practices</a></li>
  <li><a href="#changes">Changes in this version</a> (Non-Normative)</li>
  <li><a href="#acknowledgments">Acknowledgements</a> (Non-Normative)</li>
</ol>
<hr />

<h2 id="intro">1. Introduction</h2>

<p>International organizations, National Statistical Institutes, and public authorities are increasingly opening up their statistical data through Web portals for others to reuse. 
Recently, many of these portals (e.g. the Italian and Irish National Statistical Institutes portals, the Flemish Government portal and the Scottish Government portal)  
have adopted the linked data principles that facilitates data integration on the Web through the reuse of standard Web technologies such as HTTP, RDF and URIs and standard vocabularies such as RDF data cube, SKOS and XKOS. 
However, the flexibility of these standards enables statistical data portals to follow different publishing approaches, thus causing interoperability conflicts. 
The result is the creation of linked statistical data silos that hamper the integration and combination of related statistical data from different portals as wells as the development of generic exploitation tools (e.g. visualizations) 
that can be reused across different portals. </p>


<h2 id="audience">2. Audience</h2>

<p> Audience goes here </p>

<h2 id="scope">3. Scope</h2>

<p> Scope goes here</p>

<h2 id="namespaces">4. Namespaces</h2>

<table id="uripatternstable">
      <caption>Namespaces used in the document</caption>
      <tbody>
        <tr>
          <th>Prefix</th>
          <th>Namespace IRI</th>
          <th>Description</th>
        </tr>
        <tr>
          <td>rdf</td>
          <td>http://www.w3.org/1999/02/22-rdf-syntax-ns#</td>
          <td>Resource Description Framework (RDF)</td>
        </tr>
        <tr>
          <td>rdfs</td>
          <td>http://www.w3.org/2000/01/rdf-schema#</td>
          <td><a href="#bib-RDF-SCHEMA">RDF Schema vocabulary (RDFS)</a></td>
        </tr>
        <tr>
          <td>skos</td>
          <td>http://www.w3.org/2004/02/skos/core#</td>
          <td><a href="#bib-SKOS-PRIMER">Simple Knowledge Organization System (SKOS)</a></td>
        </tr>
		 <tr>
          <td>qb</td>
          <td>http://purl.org/linked-data/cube#</td>
          <td><a href="#bib-SKOS-PRIMER">The RDF Data Cube Vocabulary</a></td>
        </tr>
		 <tr>
          <td>OTHER</td>
          <td>XXX</td>
          <td><a href="#bib-SKOS-PRIMER">YYY</a></td>
        </tr>
      </tbody>
    </table>


<h2 id="runningexample">5. Running Example</h2>

<div class="example">
John works for the National Statistical Institute of Belgium and is in charge of publishing
 statistical data about unemployment and poverty in the regions of Belgium for the last year.
 These data refer to various groups of people based on their age and gender. John wants to publish 
 these data using linked data technologies and standards in order to be open and reusable.
 These data are multidimentional and thus they should be modeled as a cube. John needs to define
 its measures, units, dimensions and code lists. Some of the challenges he faces are: i) 
 the definition of multiple measures (unemployment, poverty) per cube and ii) the definition 
 of multiple units (percentage, count) per measure. Finally, John needs the data to be interoperable
 with open statistical data both inside and outside Belgium. Towards this end he wants to reuse standard
 vocabularies and code lists.
</div>

	
<h2 id="bestpractices">6. Best practices</h2>

<!-- BP1 -->
<div class="practice">
	<p><span id="definingTheMeasure" class="practicelab">BP1: Defining the measure</span></p>
    <p class="practicedesc">John needs to define a measure e.g. unemployment. He is wondering what is the best way to do is.</p>

    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-1" property="bibo:hasPart">
		<h4 class="subhead" id="ch-1" resource="#ch-1"><span property="xhv:role" resource="xhv:heading">Challenge</span></h4>
		<p>The cube measure represents the phenomenon being observed (e.g. unemployment). At the QB vocabulary measures are RDF properties
		of qb:MeasureProperty type, they are defined at the cube structure (qb:DataStructureDefinition) and are used to assign			numerical values at the observations (e.g. unemployment = 7.8%). The selection of the measure property may lead into two
			types of conflicts:</p>
		<ul>
			<li>Homonym conflicts appear when the same measure property is used to represent different measures. 
				For example the Scottish Government, defines the generic measure properties count and ratio
				(i.e. http://statistics.gov.scot/def/measure-properties/count and 
				http://statistics.gov.scot/def/measure-properties/ratio) to represent different measures. In this case,
				the phenomenon being observed is modeled as a unit.</li>
			<li>Synonym conflicts appear when different measure properties (e.g. test:unemployment and eg:unemployment)
				represent the same measure. </li>
		</ul>
		Both types of conflict appear at the existing approaches. These approaches make use of the generic measure proposed by the
		SDMX vocabulary (i.e. sdmx-measure:obsValue) in two ways: 
		
		<p><u>Re-use sdmx-measure:obsValue as a measure</u>. In this case homonym conflicts appear,
		since the same measure property represents different measures. This approach has many disadvantages:
		i) it requires additional meta-data to indicate what is measured, ii) it does not enable the use of multiple
		measures at a cube and iii) it prevents the linking with other cubes. However, sdmx-measure:obsValue facilitates
		the conversion of existing SDMX data to the QB vocabulary.</p>
		<aside class="example">
			<img src="images/bp1_eg1.jpg" width=500>
			<pre>
 :dsd a qb:DataStructureDefinition;
       qb:component [qb:measure sdmx-measure:obsValue]
			</pre>			
		</aside>
		
		<p><u>Define a new measure property that is also a sub-property of sdmx-measure:obsValue.</u> In this case both
		homonym and synonym conflict may appear. Homonym conflicts appear when the new measure property is generic 
		(e.g. count, ratio), while synonym conflicts appear when two different measure properties model the same measure 
		(e.g. unemployment). Moreover, defining the new measure property as sub-property of sdmx-measure:obsValue is a redundancy
		because it does not add any additional semantics than defining the measure as a qb:MeasureProperty.</p>
		<aside class="example">
			<img src="images/bp1_eg2.jpg" width=800>
			<pre>
:unemployment a qb:MeasureProperty;	
                    rdfs:subPropertyOf sdmx-measure:obsValue. 
:dsd a qb:DataStructureDefinition;
             qb:component [qb:measure :unemployment].
			</pre>			
		</aside>	
    </section>
	
	<section class="axioms" typeof="bibo:Chapter" resource="#bp-1" property="bibo:hasPart">
		<h4 class="subhead" id="bp-1" resource="#bp-1"><span property="xhv:role" resource="xhv:heading">Best Practice</span></h4>
		
		<p><u>BP1.1: Define a new measure that is not sub-property of sdmx-measure:obsValue.</u>
		The new measure enable the annotation with additional properties (e.g. labels, comments).</p>
		
		<aside class="example">
			<img src="images/bp1.1.jpg" width=500>
			<pre>
:unemployment a qb:MeasureProperty. 
:dsd a qb:DataStructureDefinition;
              qb:component [qb:measure :unemployment].
			</pre>			
		</aside>	
	</section>
	
	
	<section class="axioms" typeof="bibo:Chapter" resource="#open-1" property="bibo:hasPart">
		<h4 class="subhead" id="open-1" resource="#open-1"><span property="xhv:role" resource="xhv:heading">Open issues</span></h4>
		<ul>
			<li>Code lists for measures.</li>
			<li>Indicators Interoperability (name, calculation formula, data etc.)</li>
		</ul>
	</section>	
</div>
<!-- END BP1 -->



<!-- BP2 -->
<div class="practice">
	<p><span id="definingTheUnit" class="practicelab">BP2: Defining the unit</span></p>
    <p class="practicedesc">John has already defined unemployment as the measure of his cube. Now he is wondering a) whether or not to include the unit of the measure in the cube, 
      b) what RDF property to use to define the unit c) where to define the unit and d) what values to assign.</p>

    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-2.1" property="bibo:hasPart">
		<h4 class="subhead" id="ch-2.1" resource="#ch-2.1"><span property="xhv:role" resource="xhv:heading">Challenge 2.1</span></h4>
    <p>The measure on its own is a plain numerical value. To correctly interpret this value we need to define the unit i.e. the quantity or increment by which the measure is counted or described. However, it is a common practice to not use units of measure (e.g. the portal of the Italian National Institute of Statistics http://datiopen.istat.it/). </p>
    </section>
    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-2.2" property="bibo:hasPart">
		<h4 class="subhead" id="ch-2.2" resource="#ch-2.2"><span property="xhv:role" resource="xhv:heading">Challenge 2.2</span></h4>
    <p>At the QB vocabulary, units can be modeled as RDF properties of qb:AttributeProperty type that are defined at the cube structure (qb:DataStructureDefinition). The selection of the unit property may lead to synonym conflicts since different properties can be used for the same purpose. A common practice to address this challenge is to re-use sdmx-attribute:unitMeasure property. In practice however, new properties are defined as sub-properties of sdmx-attribute:unitMeasure hindering this way interoperability. For example, many existing portal follow this approach: </p>
		<aside class="example">
			<pre>
 :unit a qb:AttributeProperty;
         rdfs:subPropertyOf sdmx-attribute:unitMeasure.
 :dsd a qb:DataStructureDefinition;
         qb:component [qb:attribute :unit].     
			</pre>			
		</aside>		
    </section>
    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-2.3" property="bibo:hasPart">
		<h4 class="subhead" id="ch-2.3" resource="#ch-2.3"><span property="xhv:role" resource="xhv:heading">Challenge 2.3</span></h4>
    <p>The QB vocabulary enables the definition of units at different levels i.e. at the qb:DataSet, at the qb:MeasureProperty and at the qb:Observation. By default units are assigned to qb:Observations, however using the property qb:componentAttachment different levels can also be used. In particular the options are:</p>
    <p><u>Define the unit at the qb:DataSet.</u> In this case the querying of available units is facilitated since units can easily be identified directly from the structure of the cube. However, if multiple units are defined at the same cube, then there is no way to map the unit with the values at the qb:Observation. Another disadvantage of this approach is that qb:Observations cannot easily be re-used at another context, because they do not contain all the relevant information i.e. the unit is missing.</p>
		<aside class="example">
			<pre>
 :unemployment a qb:MeasureProperty.
 :dsd a qb:DataStructureDefinition;
         qb:component [qb:attribute  sdmx-attribute:unitMeasure;
                       qb:componentAttachment qb:DataSet];
         qb:component [qb:measure  :unemployment].
 :cube a qb:DataSet;
           qb:structure :dsd;
         <b>sdmx-attribute:unitMeasure qudt:Percent.</b> 
			</pre>			
		</aside>
    <p><u>Define the unit at the qb:MeasureProperty.</u> In this case the querying of available units is also facilitated since units can be identified directly from the structure. Moreover, multiple units can be assigned at a cube. However, different qb:MeasureProperty should be defined for different units although they represent the same measure, thus hindering interoperability e.g. two separate qb:MeasureProperty should be defined for unemployment, one assigned to percentage and another assigned to the absolute number. In this case qb:Observations cannot easily be re-used at another context, because they do not contain all the relevant information i.e. the unit is missing.</p>
    <aside class="example">
			<pre>
 :unemploymentPerc a qb:MeasureProperty;
            <b>sdmx-attribute:unitMeasure qudt:Percent.</b>
 :dsd a qb:DataStructureDefinition;
         qb:component [qb:attribute  sdmx-attribute:unitMeasure;
                       qb:componentAttachment qb:MeasureProperty];
         qb:component [qb:measure  :unemploymentPerc].
			</pre>			
		</aside>
    <p><u>Define the unit at the qb:Observation.</u> In this case multiple units can be assigned to a cube and there is no need to define different qb:MeasureProperty for different units. Moreover, qb:Observations can be re-used at another context since they contain all relevant information. However, the querying of the available units is not efficient because the query should iterate over all qb:Observation.</p>
    <aside class="example">
			<pre>
 :unemployment a qb:MeasureProperty.
 :dsd a qb:DataStructureDefinition;
                qb:component [qb:attribute  sdmx-attribute:unitMeasure];
                qb:component [qb:measure  :unemployment].
 :cube a qb:DataSet;
                qb:structure :dsd.
 :obs1 a qb:Observation;
                qb:dataset :cube.
                unemployment: "16.8"^^xsd:decimal;
             <b>sdmx-attribute:unitMeasure qudt:Percent.</b>
			</pre>			
		</aside>
    <p>Comparison matrix of the levels to define the unit:</p>
    <table border="1">
  <tr>
    <th></th>
    <th><b>qb:DataSet</b></th> 
    <th><b>qb:MeasureProperty</b></th>
    <th><b>qb:Observation</b></th>
  </tr>
  <tr>
    <td>Query optimization</td>
    <td>Yes</td>
    <td>Yes</td>
    <td>No</td>
  </tr>
  <tr>
    <td>Multiple units at one cube</td>
    <td>No</td>
    <td>Yes</td>
    <td>Yes</td>
  </tr>
  <tr>
    <td>Use one qb:MeasureProperty for different units of the same measure</td>
    <td>Yes</td>
    <td>No</td>
    <td>Yes</td>
  </tr>
  <td>Re-use qb:Observations at another context</td>
    <td>No</td>
    <td>No</td>
    <td>Yes</td>
  </tr>
</table>
    </section>
    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-2.4" property="bibo:hasPart">
		<h4 class="subhead" id="ch-2.4" resource="#ch-2.4"><span property="xhv:role" resource="xhv:heading">Challenge 2.4</span></h4>
    <p>The values of the unit property (e.g. percentage) can be expressed using predefined URIs (e.g. http://qudt.org/vocab/unit#Percent). However, the use of different URIs to express the same unit creates synonym conflicts e.g. both http://qudt.org/vocab/unit#Percent and http://statistics.gov.scot/def/concept/measure-units/percentage define percentage.  </p>
    <p>Three approaches are commonly used to express the unit values:</p>
    <ol>
      <li>Use URIs from the QUDT units vocabulary</li>
      <li>Use URIs from DBpedia</li>
      <li>Define a new code list</li>
    </ol>
    <p>All approaches are equally used by existing official portals. However, DBpedia is only used for currency units (e.g. http://dbpedia.org/resource/Pound_sterling).</p>
    <p>As a result the challenges related to units are the following:</p>
    <ul>
      <li>Should we include the unit of the measure in the cube?</li>
      <li>How to define a unit property?</li>
      <li>Where to define the unit?</li>
      <li>Which URIs to use for the unit values?</li>
    </ul>
    </section>

	<section class="axioms" typeof="bibo:Chapter" resource="#bp-2" property="bibo:hasPart">
		<h4 class="subhead" id="bp-2" resource="#bp-2"><span property="xhv:role" resource="xhv:heading">Best Practice</span></h4>
    <p><u>BP2.1: Always include units of measures.</u> The measure on its own is a plain numerical value. To correctly interpret this value we need to include the unit.</p>
    <p><u>BP2.2: Re-use the sdmx-attribute:unitMeasure.</u> This attribute can be used directly to assign values that are not part of a code list (e.g. QUDT). However, when annotation with additional properties (e.g. labels, code-list etc) is required, then new units that are also sub-properties of sdmx-attribute:unitMeasure should be defined.</p>
    <p><u>BP2.3: Define the unit at qb:Observation.</u> In case that query optimization of available units is required, then define the units also at the qb:DataSet.</p>
    <p><u>BP2.4: Use URIs from the QUDT units vocabulary.</u> It is the more complete vocabulary, however if QUDT is not sufficient, then DBpedia or code lists can be used.</p>
    <p>Example:</p>
    <aside class="example">
			<img src="images/bp2.jpg" width=800>
			<pre>
 :unemployment a qb:MeasureProperty. 
 :dsd a qb:DataStructureDefinition;
                  qb:component [qb:attribute sdmx-attribute:unitMeasure];
                  qb:component [qb:measure :unemployment].
 :cube a qb:DataSet;
                  qb:structure :dsd.
 :obs1 a qb:Observation;
                  qb:dataset :cube.
                  :unemployment "16.8"^^xsd:decimal;
                  sdmx-attribute:unitMeasure qudt:Percent.

			</pre>			
		</aside>	
	</section>
	</section>
</div>
<!-- END BP2 -->

<!-- BP3 -->
<div class="practice">
	<p><span id="DefiningMultipleUnitsPerMeasure" class="practicelab">BP3: Defining multiple units per measure</span></p>
    <p class="practicedesc">John realizes that the data he wants to publish contain unemployment both as a percentage and as an absolute number, so he needs to include both units. Now he is wondering: i) whether to include both units at the same cube or define separate cubes for each unit and ii) where to define the unit e.g. at the structure or at the observation.</p>

    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-3" property="bibo:hasPart">
		<h4 class="subhead" id="ch-3" resource="#ch-3"><span property="xhv:role" resource="xhv:heading">Challenge</span></h4>
    <p>It is a common practice to have data with multiple units for the same measure (e.g. percentage and absolute number for unemployment). In this case there are two modeling approaches that can be followed and are valid according to the QB vocabulary:</p>
      <ul>
        <li>Include all units at one cube</li>
        <li>Publish multiple cubes with one unit each</li>
      </ul></p>
     <p>The selection of the approach to be followed is affected by the level where the unit is defined as described in challenge 2.3. For example, if multiple units for the same measure are defined at the qb:DataSet, then there is no way to map the units with the values at the qb:Observation. Thus, the definition of multiple units at the qb:DataSet should be avoided.</p>
    </section>
	
	<section class="axioms" typeof="bibo:Chapter" resource="#bp-3" property="bibo:hasPart">
		<h4 class="subhead" id="bp-3" resource="#bp-3"><span property="xhv:role" resource="xhv:heading">Best Practice</span></h4>
    <p><u>BP3.1: Publish one cube with multiple units and define the unit at each qb:Observation.</u> Conceptually it is preferable to have all related units of the same measure at the same cube. In case that query optimization of available units is required, then define the units also at the qb:DataSet. For example:</p>
  <aside class="example">
			<img src="images/bp3.jpg" width=800>
			<pre>
 :unemployment a qb:MeasureProperty. 
 :dsd a qb:DataStructureDefinition;
                  qb:component [qb:attribute sdmx-attribute:unitMeasure];
                  qb:component [qb:measure :unemployment].
 :cube a qb:DataSet;
                  qb:structure :dsd.
 :obs1 a qb:Observation;
                  qb:dataset :cube.
                  :unemployment "16.8"^^xsd:decimal;
                  sdmx-attribute:unitMeasure qudt:Percent.
 :obs2 a qb:Observation;
                  qb:dataset :cube;
                  :unemployment  "89600"^^xsd:int;                                                       
                  sdmx-attribute:unitMeasure qudt:Person.
			</pre>			
		</aside>
    <p>See the appendix for other alternatives that address the same challenge.</p>  
	</section>
</div>
<!-- END BP3 -->

<!-- BP4 -->
<div class="practice">
	<p><span id="DefiningMultipleMeasures" class="practicelab">BP4: Defining multiple measures</span></p>
    <p class="practicedesc">John wants to publish also data about poverty in Belgium. John is wondering whether to publish the data about unemployment and poverty at the same cube or publish separate cubes. In the case that both measures are included at the same cube, he is also wondering what is the best way to do so, considering that the measures have multiple units (percentage and absolute number).</p>

    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-4" property="bibo:hasPart">
		<h4 class="subhead" id="ch-4" resource="#ch-4"><span property="xhv:role" resource="xhv:heading">Challenge</span></h4>
    <p>It is a common practice to have data with multiple measures (e.g. unemployment and poverty). In this case, there are two modeling approaches that can be followed and are valid according to the QB vocabulary:
      <ul>
        <li>Publish multiple cubes with one measure each </li>
        <li>Include all measures at one cube </li>
      </ul></p>
     <p>The first approach is covered by BP2 (measure with one unit) and at BP3 (measure with multiple units).</p>
     <p>Considering the second approach (multiple measures at one cube), the QB vocabulary proposes two practices to represent multiple measures: </p>
     <p><u>Multi-measure observations:</u> Define multiple qb:MeasureProperty at the data structure definition and use all measures to every qb:Observation. By defining all the measures at one observation, this practice reduces the size of the produced cube. However, a limitation of this practice is that it does not allow the association of an attribute property (e.g. unit) to a single measurement. An attribute property attached to the observation will apply to all measurements, thus it cannot represent multiple measures with multiple units.</p> 
     <aside class="example">
			<pre>
 :unemployment a qb:MeasureProperty. 
 :poverty a qb:MeasureProperty. 
 :dsd a qb:DataStructureDefinition;
                qb:component [qb:measure :unempolyment];
                qb:component [qb:measure :poverty].
 :cube a qb:DataSet;
                qb:structure :dsd.
 :obs1 a qb:Observation;
                qb:dataset :cube.
                :unemployment "89600"^^xsd:int;
                :poverty "153000"^^xsd:int. 

			</pre>			
		</aside>
    <p><u>Measure dimension:</u> Define multiple qb:MeasureProperty at the data structure definition, but restrict observations to having a single measure. This is achieved by defining an extra dimension, the qb:measureType, to denote which particular qb:MeasureProperty is included at the qb:Observation. The use of a single measure at observations produces a large number of observations, thus increasing the size of the produced cube. However, this practice enables the definition of multiple units and multiple measures.</p>
    <aside class="example">
			<pre>
  :unemployment a qb:MeasureProperty. 
  :poverty a qb:MeasureProperty. 
  :dsd a qb:DataStructureDefinition;
            qb:component [qb:measure :unempolyment];
            qb:component [qb:measure :poverty];
            qb:component [qb:dimension qb:measureType].
  :cube a qb:DataSet;
            qb:structure :dsd.
  :obs1 a qb:Observation;
            qb:dataset :cube.
            :unemployment "89600"^^xsd:int;
            qb:measureType :unemployment. 
  :obs2 a qb:Observation;
            qb:dataset :cube.
            :poverty "153000"^^xsd:int;
            qb:measureProperty :poverty.
			</pre>			
		</aside>
    <p>Comparison matrix of the practices to represent multiple measures:</p>
    <table border="1">
  <tr>
    <th></th>
    <th><b>Multi-measure observations</b></th> 
    <th><b>qb:Measure dimension</b></th>
  </tr>
  <tr>
    <td>Size</td>
    <td>Small</td>
    <td>Large</td>
  </tr>
  <tr>
    <td>Support of multiple units and  measures</td>
    <td>No</td>
    <td>Yes</td>
  </tr>
  <tr>
    <td>Support of multiple measures with the same unit</td>
    <td>Yes</td>
    <td>Yes</td>
  </tr>
</table>
    </section>
	
	<section class="axioms" typeof="bibo:Chapter" resource="#bp-4" property="bibo:hasPart">
		<h4 class="subhead" id="bp-4" resource="#bp-4"><span property="xhv:role" resource="xhv:heading">Best Practice</span></h4>
    <p>If the data have multiple measures, then it common to publish cubes with multiple measures only when measures are closely related to a single observational event. However, the approach to be followed is up to the data cube publisher.</p>
    <p><u>BP4.1: In case you model multiple measures at multiple cubes with one measure each, then see i) BP2 if the measure has one unit or ii) BP3 if the measures has multiple units.</u></p>
    <p><u>BP4.2: In case you model multiple measures at one cube then use the measure dimension approach (i.e. observations with a single measure) and define the unit at each observation (as already explained at BP3).</u></p>
    <p>Example:</p>
  <aside class="example">
			<img src="images/bp4.jpg" width=800>
			<pre>
 :unemployment a qb:MeasureProperty. 
 :poverty a qb:MeasureProperty. 
 :dsd a qb:DataStructureDefinition;
                  qb:component [qb:measure :unemployment];
                  qb:component [qb:measure :poverty];
                  qb:component [qb:dimension qb:measureType]
                  qb:component [qb:attribute sdmx-attribute:unitMeasure].
 :cube a qb:DataSet;
                  qb:structure :dsd.
 :obs1 a qb:Observation;
                  qb:dataset :cube.
                  :unemployment "16.8"^^xsd:decimal;
                  qb:measureType :unemployment;
                  sdmx-attribute:unitMeasure qudt:Percent.
 :obs2 a qb:Observation;
                  qb:dataset :cube;
                  :unemployment  "89600"^^xsd:int;    
                  qb:measureType :unemployment;
                  sdmx-attribute:unitMeasure qudt:Person.
 :obs3 a qb:Observation;
                  qb:dataset :cube;
                  :poverty  "153000"^^xsd:int;    
                  qb:measureType:poverty;
                  sdmx-attribute:unitMeasure qudt:Person.
			</pre>			
		</aside>
	</section>
  <section class="axioms" typeof="bibo:Chapter" resource="#open-4" property="bibo:hasPart">
		<h4 class="subhead" id="open-4" resource="#open-4"><span property="xhv:role" resource="xhv:heading">Open issues</span></h4>
		<ul>
			<li>•	Should a cube have one or multiple measures?</li>
			<li>•	How to index multiple units for multiple measures at BP4.2?</li>
		</ul>
	</section>	
</div>
<!-- END BP4 -->

<!-- BP5 -->
<div class="practice">
	<p><span id="DefiningDimensionProperties" class="practicelab">BP5: Defining dimension properties</span></p>
    <p class="practicedesc">John has already defined the measures and the units of his cube. Now he needs to define the dimensions including time, geography, age and gender. He is wondering what RDF properties to use for the dimensions.</p>

    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-5" property="bibo:hasPart">
		<h4 class="subhead" id="ch-5" resource="#ch-5"><span property="xhv:role" resource="xhv:heading">Challenge</span></h4>
    <p>Dimensions (e.g. geography, time) provide contextual information for the measures of the cube. At the QB vocabulary, dimensions are RDF properties of qb:DimensionProperty type and are defined at the cube structure (qb:DataStructureDefinition). The selection of the RDF property to represent a dimension may lead to synonym conflicts since different properties can be used for the same purpose. A common practice to address this challenge is to re-use dimensions defined by the linked data version of SDMX (e.g. sdmx-dimension:refArea)</p>
    <p>The time, geography, age and gender dimensions are very common at statistical data, thus the linked data version of SDMX has already defined qb:DimensionProperties to express them i.e. sdmx-dimension:refPeriod, sdmx-dimension:refArea, sdmx-dimension:age and sdmx-dimension:sex. These SDMX dimensions are not associated with the valid potential values (i.e. code list or range). A special case is the sdmx-dimension:sex dimension because a code list has already been defined and associated with the dimension.</p>
    <p>In practice however, new dimensions are defined as sub-properties of the SDMX dimensions hindering this way interoperability. An advantage of this approach is the fact that it enables the addition of extra annotation to the dimensions (e.g. label, code list, range).</p>
    </section>
	
	<section class="axioms" typeof="bibo:Chapter" resource="#bp-5" property="bibo:hasPart">
		<h4 class="subhead" id="bp-5" resource="#bp-5"><span property="xhv:role" resource="xhv:heading">Best Practice</span></h4>
    <p><u>BP5.1 (Applies to time, geography and age): Define a new dimension that is also sub-property of the corresponding SDMX dimension. Define the valid potential values of the new dimension (see BP6 and BP7).</u></p>
  <aside class="example">
			<img src="images/bp5.1.jpg" width=800>
			<pre>
 :geo a qb:DimensionProperty;
      rdfs:subPropertyOf  sdmx-dimension:refArea.
 :dsd a qb:DataStructureDefinition;
      qb:component [qb:dimension :geo].
			</pre>			
		</aside>
    <p><u>BP5.2 (Applies to gender): Re-use the sdmx-dimension:sex when the associated code list covers the modeling needs. If it does not cover the modeling needs, then define a new dimension and its valid potential values (see BP6 and BP7)</u></p>
    <aside class="example">
			<img src="images/bp5.2.jpg" width=800>
			<pre>
 :dsd a qb:DataStructureDefinition;
      qb:component [qb:dimension sdmx-dimension:sex].
			</pre>			
		</aside>  
	</section>
</div>
<!-- END BP5 -->

<!-- BP6 -->
<div class="practice">
	<p><span id="DefiningDimensionValues" class="practicelab">BP6: Defining dimension values</span></p>
    <p class="practicedesc">John needs to associate the cube dimensions with the valid potential values. He is wondering what is the best way to do so.</p>

    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-6" property="bibo:hasPart">
		<h4 class="subhead" id="ch-6" resource="#ch-6"><span property="xhv:role" resource="xhv:heading">Challenge</span></h4>
    <p>Dimension values can be either data types (e.g. xsd:dateTime) or URIs. Currently, many reference datasets have been defined to populate dimensions (e.g. time). However, some of them (e.g. reference.data.gov.uk) are not modeled as skos:ConceptScheme, skos:Collection  or  qb:HierarchicalCodeList.</p>
    <p>The QB vocabulary allows two complementary approaches for defining the valid potential values of dimensions.</p>
    <p><u>Use the property rdfs:range</u> to define the type of valid values of a qb:DimensionProperty  in the usual RDF manner. For example the values of the time dimension can be defined using as rdfs:range the xsd:dateTime.</p>
    <p><u>Use the property qb:codeList</u> to associate a qb:DimensionProperty with a code list (i.e. potential values). In statistical data sets it is common for values to be encoded using a code list and it is useful to easily identify the overall code list with a URI. The values of the qb:codeList can be a skos:ConceptScheme, skos:Collection or qb:HierarchicalCodeList. In such a case the rdfs:range can be a skos:Concept. According to the QB vocabulary a useful design pattern is to define an rdfs:Class whose members are all the skos:Concepts within a particular code list. In that way the rdfs:range can be made more specific.</p>
    </section>
	
	<section class="axioms" typeof="bibo:Chapter" resource="#bp-6" property="bibo:hasPart">
		<h4 class="subhead" id="bp-6" resource="#bp-6"><span property="xhv:role" resource="xhv:heading">Best Practice</span></h4>
    <p><u>BP6.1: Always define the rdfs:range of a qb:DimensionProperty.</u></p>
  <aside class="example">
			<img src="images/bp6.1.jpg" width=800>
			<pre>
  :d a qb:DimensionProperty;
        rdfs:range xsd:dateTime.
  :dsd a qb:DataStructureDefinition;
        qb:component [qb:dimension :d].
			</pre>			
		</aside>
    <p><u>BP6.2: Define the qb:codeList of a qb:DimensionProperty when the code list is modeled as skos:ConceptScheme or skos:Collection  or  qb:HierarchicalCodeList.</u> In this case define the rdfs:range as skos:Concept. (for the way to define a new code list see BP9)</p>
    <aside class="example">
			<img src="images/bp6.2.jpg" width=800>
			<pre>
  :d a qb:DimensionProperty;
          rdfs:range skos:Concept;
          qb:codeList :cl.
  :dsd a qb:DataStructureDefinition;
          qb:component [qb:dimension :d].
			</pre>			
		</aside>  
	</section>
  <section class="axioms" typeof="bibo:Chapter" resource="#open-6" property="bibo:hasPart">
		<h4 class="subhead" id="open-6" resource="#open-6"><span property="xhv:role" resource="xhv:heading">Open issues</span></h4>
    <p>The use of the qb:codeList indicates all the potential values of a qb:DimensionProperty. However, it is common to not use all the values at the cube. For example, a code list may contain values for the geography of Europe, but the cube uses only values for Greece. In this case there is no way to retrieve only the used values from the cube structure. They can be only retrieved by iterating over all the cube observations that is a time consuming process.</p>
	</section>	
</div>
<!-- END BP6 -->

<!-- BP7 -->
<div class="practice">
	<p><span id="DefiningValuesOfCommonDimensions" class="practicelab">BP7: Defining values of common dimensions</span></p>
    <p class="practicedesc">John now knows how to define the values of his cube’s dimension including time, gender, geography and age. However, he is still wondering: i) whether to use data types or URIs and ii) in the case of URIs what code lists to use.</p>

    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-7.1" property="bibo:hasPart">
		<h4 class="subhead" id="ch-7.1" resource="#ch-7.1"><span property="xhv:role" resource="xhv:heading">Challenge 7.1</span></h4>
    <p>The values of time dimension can be either periods of time (e.g. 2016) or specific points in time (e.g. 01/01/2016) and thus can be represented either as URIs (e.g. http://reference.data.gov.uk/id/year/2016) or as data-types (e.g. ``2016-01-01"^^xsd:date). The selection of the approach to represent the time values may lead to synonym conflicts since different values can be used for the same purpose. Four approaches are commonly used to express the time values:</p>
    <ul>
      <li>Use URIs from reference.data.gov.uk  (most popular at official portals). This reference dataset is not defined as a skos:ConceptScheme.</li>
      <li>Use resources from DBpedia, which are not included in a skos:ConceptScheme</li>
      <li>Define a code list</li>
      <li>Use the xsd:date</li>
    </ul>
    </section>
    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-7.2" property="bibo:hasPart">
		<h4 class="subhead" id="ch-7.2" resource="#ch-7.2"><span property="xhv:role" resource="xhv:heading">Challenge 7.2</span></h4>
    <p>The values of the geography and age dimensions are usually represented as URIs. The selection of the URI to represent the values may lead to synonym conflicts since different values can be used for the same purpose. Currently there are no standardized universal code-lists that can be used for these dimensions. However, assuming the geography dimension, official location-specific code lists have been defined for specific countries, regions etc. </p>
    </section>
    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-7.3" property="bibo:hasPart">
		<h4 class="subhead" id="ch-7.3" resource="#ch-7.3"><span property="xhv:role" resource="xhv:heading">Challenge 7.3</span></h4>
    <p>The values of the gender dimension are usually represented as URIs. The linked data version of SDMX has already defined a code list for gender including the values sdmx-code:sex-F (female), sdmx-code:sex-M (male),  sdmx-code:sex-U (undefined), sdmx-code:sex-N (not applicable) and sdmx-code:sex-T (total). In some cases however, the SDMX code list cannot cover the modeling needs e.g. more notions of sex are needed like hermaphroditism, transgender, asexual.</p>
    <p>This challenge is addressed by BP5.2</p>
    </section>

	<section class="axioms" typeof="bibo:Chapter" resource="#bp-7" property="bibo:hasPart">
		<h4 class="subhead" id="bp-7" resource="#bp-7"><span property="xhv:role" resource="xhv:heading">Best Practice</span></h4>
    <p><u>BP7.1a: In case you need to describe a specific point in time then define a new dimension that is also sub-property of sdmx-dimension:refPeriod and set as rdfs:range xsd:date.</u></p>
  <aside class="example">
			<img src="images/bp7.1.a.jpg" width=800>
			<pre>
  :time a qb:DimensionProperty;
          rdfs:subPropertyOf  sdmx-dimension:refPeriod;
          rdfs:range xsd:dateTime.
  :dsd a qb:DataStructureDefinition;
          qb:component [qb:dimension :time].
			</pre>			
		</aside>
    <p><u>BP7.1b: In case you need to describe a period of time then define a new dimension that is also sub-property of sdmx-dimension:refPeriod and set as rdfs:range the interval:Interval</u> (reference.data.gov.uk uses Intervals to define years). However if reference.data.gov.uk   is not sufficient, then a code lists can also be used (see BP9).</p>
    <aside class="example">
			<img src="images/bp7.1.b.jpg" width=800>
			<pre>
  :time a qb:DimensionProperty;
          rdfs:subPropertyOf  sdmx-dimension:refPeriod;
          rdfs:range interval:Interval.   
  :dsd a qb:DataStructureDefinition;
          qb:component [qb:dimension :time].
			</pre>			
		</aside>
    <p><u>BP7.2 (Applies to geography and age): Define a new dimension that is also sub-property of the sdmx-dimension:refArea or sdmx-dimension:age respectively. Define the rdfs:range and/or qb:codeList of this dimension (see BP6). If a code list or reference dataset that covers the modeling needs exists, then it should be re-used. Otherwise a new code list should be created (see BP9).</u></p>
    <aside class="example">
			<img src="images/bp7.2.jpg" width=800>
			<pre>
  :geo a qb:DimensionProperty;
         rdfs:subPropertyOf  sdmx-dimension:refArea;
         qb:codeList :belgiumGeo;
         rdfs:range skos:Concept.   
  :dsd a qb:DataStructureDefinition;
         qb:component [qb:dimension :geo].
			</pre>			
		</aside>    
	</section>
</div>
<!-- END BP7 -->

<!-- BP8 -->
<div class="practice">
	<p><span id="DefiningSingleValueDimensions" class="practicelab">BP8: Defining single value dimensions</span></p>
    <p class="practicedesc">The cube includes data only for one year i.e. 2016. John is wondering: i) whether to include this single value at the dataset or not and ii) in case of including, where to define it.</p>

    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-8" property="bibo:hasPart">
		<h4 class="subhead" id="ch-8" resource="#ch-8"><span property="xhv:role" resource="xhv:heading">Challenge</span></h4>
    <p>Some datasets contain data with a single value for a dimension (e.g. census data has a single value for the time dimension). The QB vocabulary enables the deﬁnition of the single value at different levels.</p>
    <p><u>Include single value at the qb:Dataset.</u> In this case the single value is easily identified directly from the structure. However, it does not enable the future addition of observations with a different value for that particular dimension. Another disadvantage of this approach is that qb:Observations cannot easily be re-used at another context, because they do not contain all the relevant information i.e. dimension with the single values is missing.</p>
    <p><u>Create a qb:Slice for the single value.</u> In this case the single value is easily identified from the structure. There is also the possibility to add observations with a different value by creating another qb:Slice for that value. A disadvantage of this approach is that it imposes the extra burden of defining qb:Slices when publishing data cubes. Moreover, qb:Observations cannot easily be re-used at another context, because they do not contain all the relevant information i.e. dimension with the single values is missing.</p>
    <p><u>Include single value at every qb:Observation.</u> Simplicity and flexibility during future data maintenance is the advantage of defining the single value at this level. This practice has the cost of an increased number of triples, but it enables the addition of more observations at the same dataset with a different value for that particular dimension. Another advantages is the easy re-use of qb:Observations at another context.</p>
    </section>

	<section class="axioms" typeof="bibo:Chapter" resource="#bp-8" property="bibo:hasPart">
		<h4 class="subhead" id="bp-8" resource="#bp-8"><span property="xhv:role" resource="xhv:heading">Best Practice</span></h4>
    <p><u>BP8.1: Always include the single value of a dimensions at each qb:Observation.</u></p>
    <p>Example</p>
  <aside class="example">
			<img src="images/bp8.jpg" width=800>
			<pre>
  :obs1 a qb:Observation;
        sdmx-dimension:sex sdmx-code:sex-M;
        :age :30-45;
        :geo :Brussels;
        :time year:2016.
  :obs2 a qb:Observation;
        sdmx-dimension:sex sdmx-code:sex-F;
        :age :20-30;
        :geo :Brussels;
        :time year:2016.
			</pre>			
		</aside>
	</section>
</div>
<!-- END BP8 -->








<div class="back">


<h2 id="alternatives">A Alternative practices</h2>
<!-- BP3 -->
<div class="practice">
	<p><span id="DefiningMultipleUnitsPerMeasure" class="practicelab">BP3: Defining multiple units per measure</span></p>
    <section class="axioms" typeof="bibo:Chapter" resource="#challenge-3" property="bibo:hasPart">
		<h4 class="subhead" id="ch-3alt" resource="#ch-3alt"><span property="xhv:role"</span></h4>
    <p><u>Alternative 1: Publish multiple cubes with one unit and define the unit at the qb:DataSet.</u> For example:</p>
    <aside class="example">
			<img src="images/bp3.1alt.jpg" width=800>
			<pre>
 :unemployment a qb:MeasureProperty.
 :dsd1 a qb:DataStructureDefinition;
           qb:component [qb:attribute  sdmx-attribute:unitMeasure;
                        qb:componentAttachment qb:DataSet];
          qb:component [qb:measure  :unemployment].
 :cube1 a qb:DataSet;
           qb:structure :dsd1;
           sdmx-attribute:unitMeasure qudt:Percent.
 :obs1 a qb:Observation;
           qb:dataset :cube1;
           :unemployment "16.8"^^xsd:decimal.

 :dsd2 a qb:DataStructureDefinition;
           qb:component [qb:attribute  sdmx-attribute:unitMeasure;
                         qb:componentAttachment qb:DataSet];
           qb:component [qb:measure  :unemployment].
 :cube2 a qb:DataSet;
           qb:structure :dsd2;
           sdmx-attribute:unitMeasure qudt:Person.
 :obs2 a qb:Observation;
           qb:dataset :cube2;
           :unemployment "89600"^^xsd:int.
			</pre>			
		</aside>
    <p><u>Alternative 2: Publish one cube with multiple units and define the unit at the qb:MeasureProperty.</u> For example:</p>
    <aside class="example">
			<img src="images/bp3.2alt.jpg" width=800>
			<pre>
 :unemploymentPerc a qb:MeasureProperty;
                 sdmx-attribute:unitMeasure qudt:Percent.
 :unemploymentNum a qb:MeasureProperty;
                 sdmx-attribute:unitMeasure qudt:Person.
 :dsd a qb:DataStructureDefinition;
                 qb:component [qb:attribute  sdmx-attribute:unitMeasure;
                               qb:componentAttachment qb:MeasureProperty];
                 qb:component [qb:measure  :unemploymentPerc];
                 qb:component [qb:measure  :unemploymentNum].
 :cube a qb:DataSet;
                 qb:structure :dsd.
 :obs1 a qb:Observation;
                 qb:dataset :cube;
                 :unemploymentPerc "16.8"^^xsd:decimal;
                 :unemploymentNum "89600"^^xsd:int.
			</pre>			
		</aside> 
	</section>
</div>
<!-- END BP3 -->
<h2 id="changes">B Changes in this version (Non-Normative)</h2>
<ul>
  <li><p>changelog</p>
  </li>
</ul>
</div>


<h2><a id="acknowledgments"></a>C Acknowledgements (Non-Normative)</h2>

<p>This document was produced with the participation of the <a
href="http://www.granatum.org/">GRANATUM project</a> consortium ...: </p>

</body>
</html>
